{
  "name": "ChooseAvatar",
  "files": [
    {
      "name": "ChooseAvatar.tsx",
      "content": "\"use client\";\r\nimport { updateUserImage } from \"@/actions/user.actions\";\r\nimport Image from \"next/image\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { useState } from \"react\";\r\nimport { ProfileUrls } from \"@/lib/constant\";\r\nimport { Loader } from \"lucide-react\";\r\nimport { useSession } from \"next-auth/react\";\r\n\r\nimport { FormSuccess } from \"../auth/FormSuccess\";\r\nimport { useMessageHandler } from \"../auth/useMessageHandler\";\r\nimport { FormError } from \"../auth/FormError\";\r\n\r\nconst ChooseAvatar = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const { update } = useSession();\r\n  const [error, setError] = useState<string>(\"\");\r\n  const [success, setSuccess] = useState<string>(\"\");\r\n  const path = usePathname();\r\n\r\n  useMessageHandler(\r\n    error,\r\n    success,\r\n    setError,\r\n    setSuccess,\r\n    Date.now().toLocaleString(),\r\n  );\r\n  const handleImageChange = async (img: string) => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await updateUserImage({ image: img, path });\r\n      update();\r\n      if (res?.error) {\r\n        setError(res.error);\r\n      }\r\n      if (res?.success) {\r\n        setSuccess(res.success);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"h-[400px] rounded-md p-5 overflow-y-scroll bg-slate-950 custom-scrollbar  \">\r\n      <h2 className=\"font-bold text-2xl text-white/95  m-2 border-b-2 border-white\">\r\n        Choose An Image\r\n      </h2>\r\n      <div className=\"absolute z-50 -top-16 left-0 w-full\">\r\n        <FormSuccess message={success} />\r\n        <FormError message={error} />\r\n      </div>\r\n      <div className=\"flex flex-wrap items-center justify-between gap-10 transition-all \">\r\n        {ProfileUrls.map((img) => (\r\n          <div\r\n            key={img}\r\n            className=\"group relative h-20 w-20 overflow-hidden rounded-full\"\r\n          >\r\n            <Image\r\n              src={img}\r\n              className=\"h-20 w-20 rounded-full object-fill transition-transform duration-300 ease-in-out group-hover:scale-110\"\r\n              alt=\"profile\"\r\n              width={120}\r\n              height={120}\r\n            />\r\n            <div className=\"absolute bottom-2 opacity-100 transition-opacity duration-300\">\r\n              <button\r\n                className=\"hover:bg-slate-800  w-20\r\n              translate-y-12 rounded-full bg-slate-900 px-5 py-2.5 text-center\r\n              text-sm \r\n              font-medium text-white  transition-all group-hover:translate-y-2\"\r\n                onClick={() => {\r\n                  handleImageChange(img);\r\n                }}\r\n                disabled={loading}\r\n              >\r\n                {loading && (\r\n                  <Loader className=\"animate-spin h-5 w-5 text-center ml-[10px]\" />\r\n                )}\r\n                {!loading && <p className=\"text-xs\">Choose</p>}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChooseAvatar;\r\n"
    }
  ],
  "type": "components:user"
}
